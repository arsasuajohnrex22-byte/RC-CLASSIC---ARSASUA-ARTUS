<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Data to Firebase - Vintage Moto</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: white;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #d4af37;
            font-size: 36px;
        }
        
        h2 {
            color: #d4af37;
            margin: 30px 0 20px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .collection-section {
            background: rgba(42, 42, 42, 0.8);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #d4af37;
        }
        
        .data-input {
            width: 100%;
            min-height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #555;
            border-radius: 8px;
            padding: 15px;
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-top: 10px;
            resize: vertical;
        }
        
        .data-input:focus {
            outline: none;
            border-color: #d4af37;
        }
        
        .btn {
            display: inline-block;
            background: #d4af37;
            color: #1a1a1a;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            margin-right: 10px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #b8941f;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: #555;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #666;
        }
        
        .status {
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            display: none;
        }
        
        .status.success {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid #28a745;
            color: #28a745;
            display: block;
        }
        
        .status.error {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #dc3545;
            display: block;
        }
        
        .instructions {
            background: rgba(42, 42, 42, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            border: 2px solid #d4af37;
        }
        
        .instructions p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        code {
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #d4af37;
        }
        
        .sample-data {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .actions {
            text-align: center;
            margin-top: 40px;
        }
        
        .actions .btn {
            margin: 0 10px;
            padding: 12px 25px;
            font-size: 16px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-cloud-upload-alt"></i> Upload Data to Firebase</h1>
        
        <div class="instructions">
            <p><strong>Instructions:</strong> Paste your JSON data in the appropriate boxes below. Each collection requires an array of objects.</p>
            <p><strong>Format:</strong> <code>[{ "field1": "value1", "field2": "value2" }, { "field1": "value2", "field2": "value2" }]</code></p>
            <p><strong>Note:</strong> Each object will be added as a new document with auto-generated ID.</p>
        </div>
        
        <div class="collection-section">
            <h2><i class="fas fa-list"></i> Categories</h2>
            <textarea class="data-input" id="categories-input" placeholder="Paste categories JSON here..."></textarea>
            <button class="btn" id="categories-upload-btn"><i class="fas fa-upload"></i> Upload Categories</button>
            <button class="btn btn-secondary" id="categories-sample-btn"><i class="fas fa-eye"></i> Show Sample</button>
            <div class="status" id="categories-status"></div>
        </div>
        
        <div class="collection-section">
            <h2><i class="fas fa-images"></i> Gallery</h2>
            <textarea class="data-input" id="gallery-input" placeholder="Paste gallery JSON here..."></textarea>
            <button class="btn" id="gallery-upload-btn"><i class="fas fa-upload"></i> Upload Gallery</button>
            <button class="btn btn-secondary" id="gallery-sample-btn"><i class="fas fa-eye"></i> Show Sample</button>
            <div class="status" id="gallery-status"></div>
        </div>
        
        <div class="collection-section">
            <h2><i class="fas fa-book"></i> Resources</h2>
            <textarea class="data-input" id="resources-input" placeholder="Paste resources JSON here..."></textarea>
            <button class="btn" id="resources-upload-btn"><i class="fas fa-upload"></i> Upload Resources</button>
            <button class="btn btn-secondary" id="resources-sample-btn"><i class="fas fa-eye"></i> Show Sample</button>
            <div class="status" id="resources-status"></div>
        </div>
        
        <div class="collection-section">
            <h2><i class="fas fa-helmet-safety"></i> Gear</h2>
            <textarea class="data-input" id="gear-input" placeholder="Paste gear JSON here..."></textarea>
            <button class="btn" id="gear-upload-btn"><i class="fas fa-upload"></i> Upload Gear</button>
            <button class="btn btn-secondary" id="gear-sample-btn"><i class="fas fa-eye"></i> Show Sample</button>
            <div class="status" id="gear-status"></div>
        </div>
        
        <div class="collection-section">
            <h2><i class="fas fa-calendar-alt"></i> Events</h2>
            <textarea class="data-input" id="events-input" placeholder="Paste events JSON here..."></textarea>
            <button class="btn" id="events-upload-btn"><i class="fas fa-upload"></i> Upload Events</button>
            <button class="btn btn-secondary" id="events-sample-btn"><i class="fas fa-eye"></i> Show Sample</button>
            <div class="status" id="events-status"></div>
        </div>
        
        <div class="actions">
            <button class="btn" id="upload-all-btn"><i class="fas fa-bolt"></i> Upload All Data</button>
            <button class="btn btn-secondary" id="clear-all-btn"><i class="fas fa-trash"></i> Clear All Fields</button>
            <a href="test_api.html" class="btn btn-secondary"><i class="fas fa-check-circle"></i> Test Data</a>
            <a href="index.html" class="btn"><i class="fas fa-home"></i> Back to Website</a>
        </div>
    </div>

    <script>
        let db = null;
        
        // Sample data
        const sampleData = {
            categories: `[
                {
                    "id": "british",
                    "title": "British Classics",
                    "description": "Iconic motorcycles from Triumph, Norton, BSA, and other British manufacturers.",
                    "image": "https://static1.hotcarsimages.com/wordpress/wp-content/uploads/2023/12/untitled-1.jpg",
                    "models": "120+ Models",
                    "years": "1950-1980",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "japanese",
                    "title": "Japanese Legends",
                    "description": "Reliable and innovative bikes from Honda, Yamaha, Kawasaki, and Suzuki.",
                    "image": "https://www.returnofthecaferacers.com/wp-content/uploads/attachments/trident-caferacer-8.jpg",
                    "models": "150+ Models",
                    "years": "1960-1990",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "custom",
                    "title": "Custom Builds",
                    "description": "One-of-a-kind custom motorcycles and cafe racers built by master craftsmen.",
                    "image": "http://silodrome.com/wp-content/uploads/2013/01/Harley-Cafe-Racer.jpg",
                    "models": "75+ Builds",
                    "years": "Custom",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "cafe",
                    "title": "Cafe Racers",
                    "description": "Lightweight, minimalist bikes built for speed and style on city streets.",
                    "image": "https://images.unsplash.com/photo-1558981403-c5f9899a28bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    "models": "90+ Models",
                    "years": "1960-Present",
                    "createdAt": "${new Date().toISOString()}"
                }
            ]`,
            
            gallery: `[
                {
                    "url": "https://pipeburn.com/wp-content/uploads/2017/12/05_12_2017_Kerkus_Triumph_Cafe_Racer_custom_pipeburn_BIG_01.jpg",
                    "title": "Classic Cafe Racer",
                    "description": "1968 Triumph Bonneville - Restored to perfection",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "url": "https://silodrome.com/wp-content/uploads/2015/10/Norton-Commando-Motorcycle-10-1600x1002.jpg",
                    "title": "Vintage Scrambler",
                    "description": "1972 Norton Commando - Off-road ready",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "url": "https://www.indiacarnews.com/wp-content/uploads/2021/12/BSA-Gold-Star-Launch.jpg",
                    "title": "British Classic",
                    "description": "1965 BSA Gold Star - Museum quality restoration",
                    "createdAt": "${new Date().toISOString()}"
                }
            ]`,
            
            resources: `[
                {
                    "id": "buyers-guide",
                    "title": "Buyer's Guide",
                    "description": "Our comprehensive buyer's guide provides everything you need to know before purchasing a vintage motorcycle.",
                    "icon": "fas fa-book",
                    "items": [
                        "Price guides for all major models",
                        "Inspection checklist with 50+ points",
                        "Common issues to watch for",
                        "Restoration cost estimates",
                        "Paperwork requirements"
                    ],
                    "additionalInfo": [
                        "Updated quarterly with current market prices",
                        "Includes dealer vs private sale comparisons",
                        "Regional price variations included"
                    ],
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "restoration",
                    "title": "Restoration Tips",
                    "description": "Learn from our expert restorers with step-by-step guides for bringing vintage motorcycles back to their former glory.",
                    "icon": "fas fa-tools",
                    "items": [
                        "Step-by-step restoration guides",
                        "Parts sourcing tips worldwide",
                        "Paint and chrome restoration"
                    ],
                    "createdAt": "${new Date().toISOString()}"
                }
            ]`,
            
            gear: `[
                {
                    "id": "jacket",
                    "title": "Vintage Leather Jacket",
                    "price": "Editor's Choice",
                    "description": "Our top-rated vintage-style leather jacket combines classic aesthetics with modern safety features.",
                    "rating": 5,
                    "review": "Exceptional quality leather with CE-approved armor.",
                    "image": "https://www.mr-styles.com/wp-content/uploads/2019/12/Vintage-Motorcycle-Harley-Davidson-Jacket.jpg",
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "helmet",
                    "title": "Retro Motorcycle Helmet",
                    "price": "Top Pick",
                    "description": "This vintage-style helmet offers DOT and ECE safety certifications.",
                    "rating": 4,
                    "review": "Excellent ventilation and comfort.",
                    "image": "https://i.ebayimg.com/images/g/7dMAAOSwX7dgAfLY/s-l1600.png",
                    "createdAt": "${new Date().toISOString()}"
                }
            ]`,
            
            events: `[
                {
                    "id": "event1",
                    "date": "June 15, 2025",
                    "time": "9:00 AM - 6:00 PM",
                    "title": "Vintage Motorcycle Show",
                    "location": "World Trade Center, Metro Manila",
                    "description": "Annual showcase of the finest vintage motorcycles from around the world.",
                    "attendance": "500+ Enthusiasts",
                    "entry": "Free Admission",
                    "highlights": [
                        "Live restoration demonstrations",
                        "Expert panel discussions",
                        "Vintage parts marketplace"
                    ],
                    "createdAt": "${new Date().toISOString()}"
                },
                {
                    "id": "event2",
                    "date": "July 22, 2025",
                    "time": "8:00 AM - 5:00 PM",
                    "title": "Cafe Racer Rally",
                    "location": "Circuit Makati, Metro Manila",
                    "description": "Gathering of cafe racer enthusiasts from across the Philippines.",
                    "attendance": "300+ Riders",
                    "entry": "PHP 500 Registration",
                    "highlights": [
                        "Custom bike competition",
                        "Group ride through Metro Manila",
                        "Live bands and entertainment"
                    ],
                    "createdAt": "${new Date().toISOString()}"
                }
            ]`
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            if (window.firebaseDB) {
                db = firebaseDB;
                console.log('Firebase initialized successfully');
            } else {
                alert('Firebase not initialized. Please check firebase-config.js');
                return;
            }
            
            // Setup sample buttons
            document.querySelectorAll('[id$="-sample-btn"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const collection = this.id.replace('-sample-btn', '');
                    const input = document.getElementById(`${collection}-input`);
                    input.value = sampleData[collection] || '';
                });
            });
            
            // Setup upload buttons
            document.querySelectorAll('[id$="-upload-btn"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const collection = this.id.replace('-upload-btn', '');
                    const input = document.getElementById(`${collection}-input`);
                    uploadData(collection, input.value);
                });
            });
            
            // Upload all button
            document.getElementById('upload-all-btn').addEventListener('click', uploadAllData);
            
            // Clear all button
            document.getElementById('clear-all-btn').addEventListener('click', function() {
                document.querySelectorAll('.data-input').forEach(input => {
                    input.value = '';
                });
                document.querySelectorAll('.status').forEach(status => {
                    status.className = 'status';
                    status.style.display = 'none';
                });
            });
        });
        
        async function uploadData(collectionName, jsonString) {
            const statusEl = document.getElementById(`${collectionName}-status`);
            const btn = document.getElementById(`${collectionName}-upload-btn`);
            
            statusEl.className = 'status';
            statusEl.style.display = 'none';
            btn.disabled = true;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
            
            try {
                // Parse JSON
                const data = JSON.parse(jsonString);
                
                if (!Array.isArray(data)) {
                    throw new Error('Data must be an array of objects');
                }
                
                let uploadedCount = 0;
                let errorCount = 0;
                
                // Upload each item
                for (const item of data) {
                    try {
                        await db.collection(collectionName).add({
                            ...item,
                            uploadedAt: new Date().toISOString()
                        });
                        uploadedCount++;
                    } catch (error) {
                        console.error(`Error uploading item to ${collectionName}:`, error);
                        errorCount++;
                    }
                }
                
                if (errorCount === 0) {
                    statusEl.className = 'status success';
                    statusEl.innerHTML = `<i class="fas fa-check-circle"></i> Successfully uploaded ${uploadedCount} items to ${collectionName}`;
                } else {
                    statusEl.className = 'status error';
                    statusEl.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Uploaded ${uploadedCount} items, ${errorCount} errors`;
                }
                
                statusEl.style.display = 'block';
                
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.innerHTML = `<i class="fas fa-times-circle"></i> Error: ${error.message}`;
                statusEl.style.display = 'block';
                console.error(`Error uploading to ${collectionName}:`, error);
            }
            
            btn.disabled = false;
            btn.innerHTML = originalText;
        }
        
        async function uploadAllData() {
            const collections = ['categories', 'gallery', 'resources', 'gear', 'events'];
            let totalUploaded = 0;
            let totalErrors = 0;
            
            for (const collection of collections) {
                const input = document.getElementById(`${collection}-input`);
                if (input.value.trim()) {
                    try {
                        const data = JSON.parse(input.value);
                        let uploadedCount = 0;
                        
                        for (const item of data) {
                            try {
                                await db.collection(collection).add({
                                    ...item,
                                    uploadedAt: new Date().toISOString()
                                });
                                uploadedCount++;
                            } catch (error) {
                                totalErrors++;
                            }
                        }
                        
                        totalUploaded += uploadedCount;
                        
                        const statusEl = document.getElementById(`${collection}-status`);
                        statusEl.className = 'status success';
                        statusEl.innerHTML = `<i class="fas fa-check-circle"></i> Uploaded ${uploadedCount} items`;
                        statusEl.style.display = 'block';
                        
                    } catch (error) {
                        const statusEl = document.getElementById(`${collection}-status`);
                        statusEl.className = 'status error';
                        statusEl.innerHTML = `<i class="fas fa-times-circle"></i> Error: ${error.message}`;
                        statusEl.style.display = 'block';
                        totalErrors++;
                    }
                }
            }
            
            alert(`Upload completed!\n\nTotal items uploaded: ${totalUploaded}\nTotal errors: ${totalErrors}`);
        }
    </script>
</body>
</html>